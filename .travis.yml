language: dart
sudo: false

dart:
  # Temporarily disabled. We only have the stable release of Dartium installed.
  # - dev
  - stable

env:
  - PKG=_tests
  - PKG=angular
  - PKG=angular_compiler
  - PKG=angular_test

# We don't use the dart_task model yet (mono-repo), so this will have to do.
before_install:
  - mkdir -p bin
  - export PATH="$PATH:$PWD/bin"
  - wget http://gsdview.appspot.com/dart-archive/channels/stable/release/latest/dartium/dartium-linux-x64-release.zip
  - unzip dartium-linux-x64-release.zip
  - rm dartium-linux-x64-release.zip
  - PATH_TO_DARTIUM=`pwd`/`echo dartium-linux-*`/chrome
  - ln -sv "$PATH_TO_DARTIUM" "bin/dartium"
  - echo `which dartium`

script: ./tool/travis.sh

# Only building master means that we don't run two builds for each pull request.
branches:
  only: [master]

cache:
 directories:
   - $HOME/.pub-cache
